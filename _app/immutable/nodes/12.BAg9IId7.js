import{p as te,d as ve,a as c,f as w,b as _,g as de,i as Z,s as pe,c as ne}from"../chunks/CUd8QWHv.js";import{o as me}from"../chunks/CwoISOP3.js";import{p as se,t as u,a as oe,j as ae,k as _e,s as i,c as a,g as t,u as P,e as Q,r,f as q}from"../chunks/B-QAtu-B.js";import{f as re,j as le,h as $e,G as we,H as Se,T as Te,C as ie}from"../chunks/D_JjtNv6.js";import{s as ce,c as ke,C as Le,a as W}from"../chunks/CSYrMH-W.js";import{B as Ae}from"../chunks/Cd59hmfP.js";import{M as be}from"../chunks/QcZMZDtD.js";import{S as De}from"../chunks/C-botZ5R.js";import{B as ge}from"../chunks/BKSIPxO6.js";import{f as Ee,g as ue}from"../chunks/BLpvj2LM.js";import{C as he}from"../chunks/DOiH_vOV.js";import{t as Ie}from"../chunks/BeBU0Vm-.js";import{c as je,d as Me,e as Pe}from"../chunks/DLbDak5s.js";import{L as U,l as Ce}from"../chunks/CridE-5E.js";var Ne=ve('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"></path></svg>');function fe(S,v){se(v,!0);let n=te(v,"size",3,"md");var o=Ne();u(()=>ce(o,0,ke(v.class||Le[n()]))),c(S,o),oe()}var Re=ve('<line class="minor svelte-q93rm9" y1="42" y2="45"></line>'),Ye=ve('<line class="major svelte-q93rm9" y1="35" y2="45"></line><!>',1),He=w('<div class="flex justify-between h-[100px]"><div class="flex gap-2 flex-1"><svg viewBox="-50 -50 100 100" class="svelte-q93rm9"><circle class="clock-face svelte-q93rm9" r="48"></circle><!><circle class="clock-center svelte-q93rm9" r="2"></circle><line class="hour svelte-q93rm9" y1="2" y2="-20"></line><line class="minute svelte-q93rm9" y1="4" y2="-30"></line><g><line class="second svelte-q93rm9" y1="10" y2="-38"></line><line class="second-counterweight svelte-q93rm9" y1="10" y2="2"></line></g></svg></div> <div class="flex flex-col gap-2 flex-1 items-end justify-center"><div class="flex gap-2 justify-end text-2xl font-bold"><span> </span> <span>:</span> <span> </span></div> <div class="flex justify-end text-lg"> </div></div></div>');function Oe(S,v){se(v,!0);let n=ae(_e(new Date)),o=P(()=>t(n).getHours()),m=P(()=>t(n).getMinutes()),x=P(()=>t(n).getSeconds());me(()=>{const g=setInterval(()=>{Q(n,new Date,!0)},1e3);return()=>{clearInterval(g)}});var h=He(),l=a(h),C=a(l),b=i(a(C));re(b,16,()=>[0,5,10,15,20,25,30,35,40,45,50,55],le,(g,K)=>{var z=Ye(),j=q(z),Y=i(j);re(Y,16,()=>[1,2,3,4],le,(H,V)=>{var X=Re();u(()=>W(X,"transform",`rotate(${6*(K+V)})`)),c(H,X)}),u(()=>W(j,"transform",`rotate(${30*K})`)),c(g,z)});var N=i(b,2),R=i(N),$=i(R);r(C),r(l);var T=i(l,2),k=a(T),y=a(k),D=a(y,!0);r(y);var E=i(y,4),L=a(E,!0);r(E),r(k);var J=i(k,2),I=a(J,!0);r(J),r(T),r(h),u(g=>{W(N,"transform",`rotate(${30*t(o)+t(m)/2})`),W(R,"transform",`rotate(${6*t(m)+t(x)/10})`),W($,"transform",`rotate(${6*t(x)})`),_(D,t(o)<10?`0${t(o)}`:t(o)),_(L,t(m)<10?`0${t(m)}`:t(m)),_(I,g)},[()=>new Date().toLocaleDateString("id-ID",{month:"short",day:"2-digit",year:"numeric"})]),c(S,h),oe()}var Ge=w("<small> </small>"),Be=w('<div class="flex justify-between gap-2 relative"><div><p> </p></div> <div><p> </p> <!></div></div>');function qe(S,v){se(v,!0);const n=()=>ne(Ee,"$activeTheme",o),[o,m]=pe();let x=te(v,"timings",3,null),h=te(v,"prayerTitle",3,""),l=ae(!1),C=ae("");me(async()=>{const $=je(),T=`${x()?.[v.prayerKey]||""}`.substring(0,5),y=Me(`${$.format("YYYY-MM-DD")} ${T}`,"YYYY-MM-DD HH:mm").diff($,"minute");Q(l,y<0),Q(C,Pe(y),!0)});var b=de(),N=q(b);{var R=$=>{{let T=P(()=>`${t(l)?n()==="light"?"!bg-gray-400":"grayscale":""}`);he($,{get class(){return t(T)},children:(k,y)=>{var D=Be(),E=a(D),L=a(E),J=a(L,!0);r(L),r(E);var I=i(E,2),g=a(I),K=a(g,!0);r(g);var z=i(g,2);{var j=Y=>{var H=Ge(),V=a(H,!0);r(H),u(()=>_(V,t(C))),c(Y,H)};Z(z,Y=>{t(l)||Y(j)})}r(I),r(D),u(()=>{ce(L,1,`${t(l)?"line-through":""}`),_(J,h()),ce(g,1,`${t(l)?"line-through":""}`),_(K,x()[v.prayerKey])}),c(k,D)},$$slots:{default:!0}})}};Z(N,$=>{x()&&$(R)})}c(S,b),oe(),m()}function Je(S,v){const n=[{key:"Fajr",title:"Subuh"},{key:"Dhuhr",title:"Dzuhur"},{key:"Asr",title:"Ashar"},{key:"Maghrib",title:"Maghrib"},{key:"Isha",title:"Isya"}];let o=te(v,"timings",3,null);var m=de(),x=q(m);re(x,17,()=>n,h=>h.key,(h,l)=>{qe(h,{get timings(){return o()},get prayerKey(){return t(l).key},get prayerTitle(){return t(l).title}})}),c(S,m)}var Ke=w("<!> ",1),ze=w('<div class="flex flex-wrap gap-2 justify-between items-center"><h2 class="text-xl font-bold"> </h2> <div><!></div></div>'),Fe=w('<div class="flex gap-2 items-center"><span> </span></div>'),Ue=w("<!> ",1),We=w('<div class="flex flex-wrap items-center justify-between gap-2 mb-4"><div class="flex flex-col gap-2"><!> <small> </small></div> <!></div>'),Ve=w('<div class="flex justify-between items-center gap-2"><span>&nbsp;</span> <span>&nbsp;</span></div>'),Ze=w('<div class="flex gap-2 px-4 mb-4"><h1 class="text-3xl font-bold"> </h1></div> <div class="px-4 mb-4"><!></div> <div class="px-4 flex flex-col gap-2"><!> <div class="mb-4"><!></div> <!></div> <!>',1);function mt(S,v){se(v,!0);const n=()=>ne(t(C),"$current",m),o=()=>ne(ue,"$settingLocation",m),[m,x]=pe(),h="https://api.aladhan.com/v1/calendar";let l=ae(_e([]));const C=P(()=>Ce);let b=P(()=>t(l).find(e=>e.date.gregorian.date===new Date().toLocaleDateString("id-ID",{month:"2-digit",day:"2-digit",year:"numeric"}).replace(new RegExp(/\//g),"-")));async function N({latitude:e,longitude:s}){const d=new Date().getFullYear(),f=new Date().getMonth()+1,p=await(await fetch(`${h}/${d}/${f}?method=15&shafaq=general&latitude=${e}&longitude=${s}`)).json();Q(l,p?.data||[],!0),localStorage.setItem(ie.STORAGE_KEY.PRAYER,JSON.stringify(p))}async function R({latitude:e,longitude:s,checkCache:d}){const f=localStorage.getItem(ie.STORAGE_KEY.PRAYER);if(d&&f){const A=JSON.parse(f);Q(l,A?.data||[],!0);const p=t(l)[0];if(p){const F=p.date.gregorian.month.number,O=new Date().getMonth()+1;F!==O&&await N({latitude:e,longitude:s})}}else await N({latitude:e,longitude:s})}async function $({latitude:e,longitude:s}){try{return(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${e}&lon=${s}`)).json())?.address?.city_district||""}catch{return console.error(`Failed get distric for lat: ${e}, long: ${s}`),""}}let T=async()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(async e=>{const s=await $({latitude:e.coords.latitude||0,longitude:e.coords.longitude||0});ue.set({lt:e.coords.latitude||0,lg:e.coords.longitude||0,district:s}),localStorage.setItem(ie.STORAGE_KEY.LOCATION,JSON.stringify({lt:e.coords.latitude||0,lg:e.coords.longitude||0,district:s})),Ie.show({message:`${n()==U.ENGLISH.locale?"Managed to get the latest location!":"Berhasil mendapatkan lokasi teranyar!"}`,type:"success"}),await R({latitude:e.coords.latitude,longitude:e.coords.longitude,checkCache:!1})})};me(async()=>{setTimeout(async()=>{o()?.lg&&o().lg&&await R({latitude:o().lt,longitude:o().lg,checkCache:!0})},1e3)});var k=Ze();$e("csd2oq",e=>{{let s=P(()=>`${Te.PATH}jadwal-sholat/`);be(e,{get title(){return Se},get desc(){return we},get url(){return t(s)}})}});var y=q(k),D=a(y),E=a(D);r(D),r(y);var L=i(y,2),J=a(L);{let e=P(()=>[{text:n()==U.ENGLISH.locale?"üè† Home":"üè† Beranda",href:"/"}]);Ae(J,{get items(){return t(e)}})}r(L);var I=i(L,2),g=a(I);{var K=e=>{var s=ze(),d=a(s),f=a(d,!0);r(d);var A=i(d,2),p=a(A);ge(p,{onClick:T,children:(F,O)=>{var M=Ke(),G=q(M);fe(G,{});var B=i(G,1,!0);u(()=>_(B,n()==U.ENGLISH.locale?"Allow location access":"Beri akses lokasi")),c(F,M)},$$slots:{default:!0}}),r(A),r(s),u(()=>_(f,n()==U.ENGLISH.locale?"":"Lokasi belum diketahui")),c(e,s)},z=e=>{var s=We(),d=a(s),f=a(d);{var A=M=>{var G=Fe(),B=a(G),ee=a(B,!0);r(B),r(G),u(()=>_(ee,o().district)),c(M,G)};Z(f,M=>{o().district&&M(A)})}var p=i(f,2),F=a(p);r(p),r(d);var O=i(d,2);ge(O,{onClick:T,children:(M,G)=>{var B=Ue(),ee=q(B);fe(ee,{});var xe=i(ee);u(()=>_(xe,` ${n()==U.ENGLISH.locale?"Update Location":"Perbarui Lokasi"}`)),c(M,B)},$$slots:{default:!0}}),r(s),u(()=>_(F,`${o().lt??""}, ${o().lg??""}`)),c(e,s)};Z(g,e=>{o()===null?e(K):e(z,!1)})}var j=i(g,2),Y=a(j);Oe(Y,{}),r(j);var H=i(j,2);{var V=e=>{Je(e,{get timings(){return t(b).timings}})},X=e=>{var s=de(),d=q(s);re(d,16,()=>[1,2,3,4,5],le,(f,A)=>{he(f,{children:(p,F)=>{var O=Ve();u(()=>W(O,"data-key",A)),c(p,O)},$$slots:{default:!0}})}),c(e,s)};Z(H,e=>{t(b)?e(V):e(X,!1)})}r(I);var ye=i(I,2);De(ye,{variant:"JADWAL_SHOLAT"}),u(()=>_(E,`‚è∞ ${n()==U.ENGLISH.locale?"Prayer schedule":"Jadwal Sholat"}`)),c(S,k),oe(),x()}export{mt as component};
